# GitHub Action: Veloera 自動簽到

name: Veloera Check-in

on:
  workflow_dispatch: # 允許手動觸發
  schedule:
    # 每日台北時間早上 10 點 (UTC+8) 執行，即 UTC 時間凌晨 2 點
    - cron: "0 2 * * *"

jobs:
  check-in:
    runs-on: ubuntu-latest
    name: Veloera 簽到任務

    steps:
      - name: 簽出程式碼
        uses: actions/checkout@v4

      - name: 設定 Python 環境
        uses: actions/setup-python@v5
        with:
          python-version: "3.10"
          cache: "pip"
          cache-dependency-path: "_CRONJOBS/veloera_sign/requirements.txt"

      - name: 安裝依賴套件
        run: pip install -r _CRONJOBS/veloera_sign/requirements.txt

      - name: 執行簽到腳本
        # 註解：此處的環境變數將會從 GitHub -> Settings -> Secrets and variables -> Actions 中讀取
        # 您必須在您的儲存庫中設定好這些 Secrets，腳本才能成功執行
        env:
          BASE_URL: ${{ secrets.VELOERA_BASE_URL }}
          USER_ID: ${{ secrets.VELOERA_USER_ID }}
          ACCESS_TOKEN: ${{ secrets.VELOERA_ACCESS_TOKEN }}
        run: python _CRONJOBS/veloera_sign/checkin.py
