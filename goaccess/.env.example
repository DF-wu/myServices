# ----------------------------------------------------------------------
# GoAccess 環境設定檔範本 (v3.1 - DB-IP)
#
# 使用方式:
# 1. 複製此檔案為 .env (cp .env.example .env)
# 2. 根據您的需求修改以下變數。
# 3. 所有 GoAccess 的功能都由 GOACCESS_OPTS 這一個變數集中控制。
# ----------------------------------------------------------------------

# --- 基礎設定 (必填) ---

# 時區設定 (例如: Asia/Shanghai, UTC)
TZ=${TZ:-Asia/Taipei}

# GoAccess 對外服務的 Web UI 連接埠
GOACCESS_PORT=7890

# WebSocket 連線 URL (極為重要，請填寫您的公開網域或IP)
GOACCESS_WS_URL=

# --- 日誌分析設定 (必填) ---

# 要分析的日誌檔名 (支援萬用字元 *)
LOG_FILE=*_access.log

# ----------------------------------------------------------------------
# --- 全功能控制中心 (GOACCESS_OPTS) ---
# ----------------------------------------------------------------------
#
# 將所有您需要的 GoAccess 命令列參數全部寫在這裡，用空格隔開。
# 這是控制 GoAccess 行為的唯一入口點。
# GeoIP 資料庫會由 compose 自動偵測並加入，無需在此設定。
#
# 以下是一個包含所有常用功能的完整範例。
# 您可以根據需要，複製、刪除或修改其中的任何部分，來組成您自己的設定。
# 為了可讀性，範例使用了 `\` 進行換行，您也可以將所有參數寫在同一行。
#
# ----------------------------------------------------------------------

GOACCESS_OPTS="\
  --log-format='%h %^[%d:%t %^] \"%r\" %s %b \"%R\" \"%u\"' \
  --time-format='%H:%M:%S' \
  --date-format='%d/%b/%Y' \
  --html-report-title='My Awesome Server Stats' \
  --html-prefs='{\"theme\":\"darkly\"}' \
  --sort-panel=VISITORS,BY_HITS,DESC \
  --max-items=120 \
  --persist \
  --restore \
  --keep-last=365 \
  --444-as-404 \
  --4xx-to-unique-count \
  --jobs=4 \
"

# --- GOACCESS_OPTS 參數詳細註解 (供您參考) ---
#
# --- 以下為可選參數，您可以將需要的行複製到上面的 GOACCESS_OPTS 中 ---
#
# --ignore-ip=127.0.0.1
# --ignore-crawler='Googlebot'
# --ignore-crawler='bingbot'
# --ignore-status=401
# --ignore-referrer='*.spam.com'
#
# ----------------------------------------------------------------------
#
# --log-format='...'             # (必填) 日誌格式，NPM 預設值已填好。
# --time-format='...'             # (可選) 時間格式。例如: %H:%M:%S
# --date-format='...'             # (可選) 日期格式。例如: %d/%b/%Y
#
# --geoip-database <path>         # (自動) 由 Compose 自動處理。使用 DB-IP 免費資料庫，無需手動設定。
#
# --html-report-title='...'       # (可選) 報告標題。
# --html-prefs='{"theme":"..."}' # (可選) 報告主題。可選值: darkly, greyscale, lightgrey, lightly, monokai, retro。
# --sort-panel=PANEL,METRIC,ORDER # (可選) 預設面板排序。
#                                 #   PANEL 可選: VISITORS, REQUESTS, NOT_FOUND, HOSTS, OS, BROWSERS, VISIT_TIMES, VIRTUAL_HOSTS, REFERRERS, KEYPHRASES, STATUS_CODES, GEO_LOCATION, ASN 等。
#                                 #   METRIC 可選: BY_HITS (點擊數), BY_VISITORS (訪客數), BY_DATA (流量)。
#                                 #   ORDER 可選: ASC (升序), DESC (降序)。
# --ignore-panel=PANEL            # (可選) 隱藏指定面板，可多次使用。
#                                 #   可選面板: VISITORS, REQUESTS, REQUESTS_STATIC, NOT_FOUND, HOSTS, OS, BROWSERS, VISIT_TIMES, VIRTUAL_HOSTS, REFERRERS, REFERRING_SITES, KEYPHRASES, STATUS_CODES, REMOTE_USER, CACHE_STATUS, GEO_LOCATION, ASN。
# --max-items=120                 # (可選) 各面板顯示的項目數量上限。
#
# --persist                       # (建議) 啟用持久化儲存。
# --restore                       # (建議) 啟動時從資料庫恢復。
# --keep-last=365                 # (建議) 資料庫保留天數。
# --444-as-404                    # (建議) 將 Nginx 444 視為 404。
# --4xx-to-unique-count           # (建議) 將 4xx 錯誤計為獨立訪客。
# --jobs=4                        # (建議) 分析時使用的處理緒數量。
#
# --ignore-ip=1.2.3.4             # (可選) 忽略指定 IP，可多次使用。
# --ignore-crawler='...'          # (可選) 忽略指定爬蟲，可多次使用。
# --ignore-status=401             # (可選) 忽略指定狀態碼，可多次使用。支援範圍，如 400-499。
# --ignore-referrer='...'         # (可選) 忽略指定來源，可多次使用。支援萬用字元 *。
